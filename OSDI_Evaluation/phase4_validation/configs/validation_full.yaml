experiment:
  name: "phase4_validation_full"
  description: "Full validation of Phase 4 metrics (70B model, 30 samples each)"
  version: "1.0"

# Test 1: Logit Equivalence (with 70B)
logit_equivalence:
  enabled: true
  model_id: "meta-llama/Llama-2-70b-hf"
  dtype: "float16"
  num_samples: 30
  tolerance_norm: 0.1
  tolerance_max_diff: 0.1
  pass_if_predictions_match: true

# Test 2: PCIe Flatline (70B on 60GB GPU)
pcie_flatline:
  enabled: true
  model_id: "meta-llama/Llama-2-70b-hf"
  dtype: "float16"
  ring_buffer_gb: 48
  vram_limit_gb: 60  # Enforced constraint from evaluation plan
  sample_duration_seconds: 30
  min_sustained_bandwidth_mb_per_s: 20000
  sustained_ratio: 0.8

# Test 3: Agent Sleep/Resume
agent_sleep_resume:
  enabled: true
  model_id: "meta-llama/Llama-2-7b-hf"
  dtype: "float16"
  idle_threshold_seconds: 1.0
  sleep_duration_seconds: 30.0
  host_swap_pool_gb: 32.0
  max_retries: 3

# Server configuration
server:
  host: "localhost"
  port: 5556
  timeout_seconds: 300  # Longer timeout for full tests

# Hardware constraints (from evaluation plan)
hardware:
  vram_limit_gb: 60
  gpu_device: 0
  enforce_vram_limit: true

# Logging
logging:
  level: "INFO"
  save_results: true
  results_dir: "OSDI_Evaluation/phase4_validation/results"
  verbose: true

